<div class="group relative flex items-center gap-4 mt-2 p-3 rounded-lg hover:bg-gray-100/60">
  <div
    [class]="iconStyles()"
    class="w-12 h-12 flex items-center aspect-square justify-center text-xl text-gray-800 bg-gray-100 rounded-full"
  >
    @if (transaction().icon) {
      <ngx-emoji [emoji]="transaction().icon" [size]="32" class="leading-none"></ngx-emoji>
    } @else {
      <ng-icon name="lucideUtensilsCrossed" class="text-blue-500!"></ng-icon>
    }
  </div>

  <div class="flex flex-col sm:flex-row flex-1 sm:items-center sm:justify-between">
    <div class="max-w-28">
      <p
        #textEl
        class="text-sm text-gray-700 font-medium truncate"
        [pTooltip]="isTruncated(textEl) ? transaction().name : ''"
        tooltipPosition="top"
      >
        {{ transaction().name }}
      </p>
      <p class="text-[10px] uppercase tracking-wider text-gray-500 mt-1">
        {{ transaction().date | date: 'dd/MM/yyyy' }}
      </p>
    </div>

    <div class="flex items-center gap-2">
      @if (!hideDeleteButton()) {
        <button
          (click)="onDeleteModalVisible()"
          type="button"
          aria-label="Click to delete particular income"
          class="text-gray-400 hover:text-red-800 opacity-100 md:opacity-0 group-hover:opacity-100 md:translate-x-2 group-hover:translate-x-0 transition-all duration-300 flex items-center justify-center"
          [pTooltip]="type() + '.delete' | translate"
          tooltipPosition="top"
        >
          <ng-icon name="lucideTrash2" size="18"></ng-icon>
        </button>

        <app-modal
          [(isModalVisible)]="deleteModalVisible"
          [headerText]="'operations.delete-header' | translate"
        >
          <div class="flex flex-col gap-6 py-2">
            <div class="flex items-center gap-4">
              <div
                class="w-12 h-12 rounded-full bg-red-50 flex items-center justify-center shrink-0"
              >
                <ng-icon name="lucideTrash2" size="26" class="text-red-600!"></ng-icon>
              </div>
              <div class="flex flex-col">
                <p class="text-slate-700 font-medium">
                  {{ type() + '.delete_modal.text' | translate }}
                </p>
                <p class="text-sm text-slate-500">
                  {{ type() + '.delete_modal.hint' | translate }}
                </p>
              </div>
            </div>

            <div class="flex justify-end gap-3 mt-2">
              <button
                type="button"
                class="px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-lg transition-colors"
                (click)="deleteModalVisible.set(false)"
              >
                {{ 'operations.cancel' | translate }}
              </button>
              <button type="button" class="btn-danger" (click)="onDelete()">
                {{ 'operations.delete-confirm' | translate }}
              </button>
            </div>
          </div>
        </app-modal>
      }

      <div [class]="getComputedStyles()" class="flex items-center gap-2 px-2 py-1.5 rounded-m">
        <h6 class="text-xs font-medium">
          {{ type() === TransactionType.INCOME ? '+' : '-' }}
          {{ transaction().amount | currency: 'PLN' : 'symbol' : '1.2-2' : 'pl' }}
        </h6>
        @if (type() === TransactionType.INCOME) {
          <ng-icon name="lucideTrendingUp"></ng-icon>
        } @else {
          <ng-icon name="lucideTrendingDown"></ng-icon>
        }
      </div>
    </div>
  </div>
</div>
